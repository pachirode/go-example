# 结构体

### 空结构体

- 多个空结构体内存地址可能相同
- 空结构体占用的字节数为 `0`
- 空结构体的值相同

> 一个结构体或数组类型不包含任何占用内存大小不为 0 的元素，大小为 0；两个不同的 0 大小的变量在内存中可能拥有相同的内存地址

##### 空结构体影响内存对齐

空结构体作为另一个结构体字段时，根据位置的不同，可能因为内存对齐的原因，导致外层结构体大小不一样
当空结构体放在另一个结构体最后一个字段时，会触发内存对齐，此时外层结构体会占用到更多内存

##### 实现 `Set`

一个不需要关心 `value` 值的 `map` 可以看作是 `set`，空结构体也不占空间

##### 申请大容量

- `Array`
  - 使用空结构体不会占据内存地址
  - 其他的类型会占
- `Slice`
  - 无论什么类型都只有 `header` 占空间

##### 信号通知

空结构体不涉及数据传输，所以没有额外的内存开销


##### 无操作方法接收器

使用空结构体作为方法接收器

##### 接口实现

忽略不需要的输出和单元测试

`io.Discard` 实现了 `io.Writer`，该方法目的就是什么也不做，让任何输入都能成功

##### 标识符




### 结构体不可比

结构体是可比的，不取决于结构体字段是否可导出，取决于结构体是否包含不可比类型

`_ [0]func() // disallow ==` 不占内存，不能把该字段放在最后一个字段，会触发内存对齐

### 判断结构体是否为空

##### 零值字面量

仅包含可比较字段的结构体，将结构体和其零值字面量进行比较

在 `if` `switch` `for` 条件中使用结构体字面量时需要添加括号，避免出现解析问题
  - `if a == (P{})`

##### reflect.DeepEqual()

具有不可比较的字段，适用于任何结构体

##### reflect.Value.IsZero()



