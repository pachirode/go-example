# 有限状态机

个数优先的状态，在任意时刻只处于一种状态
在某种条件下，会从一种状态转换为另一种状态

# looplab

### 源码

##### FSM

- `current string`
    - 当前状态
- `transitions map[eKey]string`
    - 事件原状态映射到目标状态
- `callbacks map[cKey]Callback`
    - 回调类型和回调函数
- 互斥锁
    - 当前状态
    - 事件

##### 构造函数

参数
- 有限状态机当前状态
- 注册多个事件
    - 当前状态触发事件，状态机的状态改变
- 回调函数列表
    - 一共八个
        - 根据事件触发和状态改变来响应

##### 状态转换

通过指定事件名称触发状态转换

- 判断上次转换是否完成
- 需要触发的事件是否有效
  - 事件和当前状态是否符合定义
- 构造事件对象，期间会开始触发回调函数
- 是否需要进行状态转换
  - 同步转换
  - 异步转换

##### 元信息

进行数据传递

